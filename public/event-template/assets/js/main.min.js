var $app={},emailCheck=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,phoneCheck=/^-{0,1}\d*\.{0,1}\d+$/,siteURL="";if(void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la"))var msg={signin_fail:"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง กรุณาลองใหม่อีกครั้ง",email:"กรุณาใส่อีเมล์",email_invalid:"กรุณาใส่อีเมล์ให้ถูกต้อง",email_duplicate:"ขออภัยอีเมลนี้ถูกใช้งานแล้ว",password:"กรุณาใส่รหัสผ่าน",password_min:"กรุณาใส่รหัสผ่านอย่างน้อย 8 ตัวอักษร",password_confirm:"กรุณายืนยันรหัสผ่าน",password_match:"กรุณายืนยันรหัสผ่านให้ตรงกัน",name:"กรุณาใส่ชื่อ",firstname:"กรุณาใส่ชื่อ",lastname:"กรุณาใส่นามสกุล",gender:"กรุณาเลือกเพศ",birthday:"กรุณาใส่วันเกิดให้ครบถ้วน",idcard:"กรุณาใส่หมายเลขประจำตัวประชาชน",idcard_limit:"กรุณาใส่รหัสประจำตัวประชาชนให้ครบ 13 หลัก",idcard_invalid:"กรุณาใส่รหัสประจำตัวประชาชนให้ถูกต้อง",passport:"กรุณาใส่เลขทีหนังสือเดินทาง",telephone:"กรุณาใส่เบอร์โทรศัพท์",telephone_invalid:"กรุณาใส่เบอร์โทรศัพท์ด้วยตัวเลขเท่านั้น",telephone_limit:"กรุณาใส่เบอร์โทรศัพท์ให้ครบถ้วน",address:"กรุณาใส่ที่อยุ่",country:"กรุณาเลือกประเทศ",district:"กรุณาใส่ตำบล/แขวง",amphoe:"กรุณาเลือกอำเภอ/เขต",province:"กรุณาเลือกจังหวัด",zipcode:"กรุณาใส่รหัสไปรษณีย์",terms:"กรุณายอมรับเงื่อนไขการใช้บริการ",captcha:"กรุณาระบุตัวตน",category:"กรุณาเลือกหัวข้อ",subject:"กรุณาระบุเรื่อง",detail:"กรุณาระบุรายละเอียด",date:"วัน",month:"เดือน",year:"ปี",btn_buynow:"ซื้อบัตร",btn_more:"เลือกรอบ/ประเภทบัตร",btn_queue:"รับคิวซื้อบัตร",txt_error:"ขออภัย",txt_error_detail:"ขณะนี้มีผู้ใช้งานจำนวนมาก<br>กรุณาโหลดหน้าใหม่อีกครั้ง",txt_reload_page:"โหลดหน้าใหม่",select_date:"กรุณาเลือกวันที่"};else var msg={signin_fail:"The email address or password you entered were invalid. Please try again.",email:"Please enter email.",email_invalid:"Please enter a valid email address.",email_duplicate:"Sorry, this email is already in use.",password:"Please enter a password.",password_min:"Please enter password least 8 characters.",password_confirm:"Please verify your password.",password_match:"Please verify your password.",name:"Please enter your name.",firstname:"Please enter firstname.",lastname:"Please enter lastname.",gender:"Please enter gender.",birthday:"Please enter birthdate.",idcard:"Please enter your ID Card No.",idcard_limit:"Please enter your 13-digit ID Card No.",idcard_invalid:"Please enter the correct ID Card No.",passport:"Please enter your passport number.",telephone:"Please enter a telephone number.",telephone_invalid:"Please enter only number for telephone.",telephone_limit:"Please enter a telephone.",address:"Please enter address.",country:"Please select country",district:"Please enter a city or tumbon.",amphoe:"Please select district",province:"Please select province.",zipcode:"Please enter zipcode.",terms:"Please accept terms of services.",captcha:"Please check recaptcha.",category:"Please select category",subject:"Please enter subject",detail:"Please enter detail",date:"Date",month:"Month",year:"Year",btn_buynow:"BUY NOW",btn_more:"Get Ticket",btn_queue:"Get Queue",txt_error:"SORRY",txt_error_detail:"Something went wrong, <br>Please try again.",txt_reload_page:"Reload Page",select_date:"Please select date."};var user=detect.parse(navigator.userAgent),$window={h:$(window).height(),w:$(window).width()},flagGetCountry=!1;$(function(){$app.check.init(),$app.global.init()}),$app.language="th",$app.check={init:function(){this.lang(),this.hash(),($app.check.ie()||$app.check.safari()||$app.check.chrome())&&$app.popup.browser()},ie:function(){return"IE"==user.browser.family&&user.browser.major<11},safari:function(){return"Desktop"==user.device.type&&"Safari"==user.browser.family&&user.browser.major<12},chrome:function(){return"Desktop"==user.device.type&&"Chrome"==user.browser.family&&user.browser.major<55},lang:function(){void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?($app.fn.setLang("th"),$app.check.countryTH=!0):($app.fn.setLang($.cookie("__la")),$app.check.countryTH=!1)},hash:function(){switch(window.location.hash){case"#signin":$app.popup.signinInit("signin"),$app.popup.signin();break;case"#signup":$app.popup.signinInit("signup"),$app.popup.signin()}},countryTH:!0};var lazy,isShowMenu=!1;$app.global={init:function(){lazy=$(".lazy").lazy({visibleOnly:!0,chainable:!1,threshold:$window.h/2}),this.menu(),this.tab(),this.selectbox(),this.dropdown(),this.accordion(),this.viewPassword(),$app.form.init(),$.ajaxSetup({xhrFields:{withCredentials:!0}})},menu:function(){$(".btn-menu").click(function(e){isShowMenu?(isShowMenu=!1,$(".btn-menu").removeClass("active").addClass("inactive"),$("html").removeClass("show-menu")):(isShowMenu=!0,$(".btn-menu").removeClass("inactive").addClass("active"),$("html").addClass("show-menu")),e.preventDefault()}),$(".main-footer .menu-head").click(function(e){$window.w<=768&&($(this).toggleClass("active"),$(this).parent(".menu-group").find(".menu-list").slideToggle())})},tab:function(){var e=0;0!=$(".tabbox").length&&($(".tabbox").each(function(){"false"!=$(this).attr("data-auto")?($(this).find(".tb-select li").removeClass("active"),$(this).find(".tb-item").eq(e).siblings(".tb-item").removeClass("active").hide(),$(this).find(".tb-select li").eq(e).addClass("active"),$(this).find(".tb-item").eq(e).show().addClass("active")):$(this).find(".tb-item").removeClass("active").hide()}),$(".tb-select li a").click(function(a){e=$(this).parent().index(),$(this).parents(".tabbox").find(".tb-select li").removeClass("active"),$(this).parents(".tabbox").find(".tb-select li").eq(e).addClass("active"),$(this).parents(".tabbox").find(".tb-item").removeClass("active").hide(),$(this).parents(".tabbox").find(".tb-item").eq(e).show().addClass("active"),lazy.update(),a.preventDefault()}))},accordion:function(){0!=$(".accordionbox").length&&$(".accordionbox").each(function(){$(".check-item").on("change",function(){$(this).is(":checked")&&($(this).parents(".item").siblings().removeClass("active"),$(this).parents(".item").addClass("active"))})})},selectbox:function(){0!=$(".selectbox").length&&($("html").click(function(){$(".selectbox").removeClass("show-options")}),$(".selectbox .sb-selector").click(function(e){$(this).parent(".selectbox").hasClass("show-options")?$(this).parent(".selectbox").removeClass("show-options"):$(this).parent(".selectbox").addClass("show-options"),e.stopPropagation()}),$(".selectbox .sb-options a").click(function(e){var a=$(this).attr("data-value"),t=$(this).text();$(this).parents(".selectbox").find(".sb-selector").text(t).addClass("selected"),$(this).parents(".selectbox").removeClass("show-options"),$(this).parents(".selectbox").find(".sb-value").val(a),e.preventDefault()}))},dropdown:function(){0!=$(".box-dropdown").length&&($("html").click(function(){$(".box-dropdown").removeClass("show-dropdown"),$(".box-dropdown .btn-dropdown").removeClass("active")}),$(".box-dropdown").click(function(e){e.stopPropagation()}),$(".box-dropdown .btn-dropdown").click(function(e){$(".box-dropdown .btn-dropdown").removeClass("active"),$(this).parent(".box-dropdown").hasClass("show-dropdown")?($(this).removeClass("active"),$(this).parent(".box-dropdown").removeClass("show-dropdown")):($(this).addClass("active"),$(".box-dropdown").removeClass("show-dropdown"),$(this).parent(".box-dropdown").addClass("show-dropdown"),$(this).parent(".box-dropdown").find(".noti-icon").hide()),e.stopPropagation()}))},viewPassword:function(){$(".box-view-password").length>0&&$(".box-view-password .box").append('<a class="btn-view-password" href="javascript:void(0);" tabIndex="-1"></a>'),$(".btn-view-password").each(function(){$(this).click(function(e){$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent(".box").find('[type="text"]').attr("type","password")):($(this).addClass("active"),$(this).parent(".box").find('[type="password"]').attr("type","text")),e.preventDefault()})})}},$app.form={init:function(){$(".input-txt").not(".input-address").each(function(){""!=$(this).val()&&$(this).parent(".input-group").addClass("active"),$(this).on("keyup change",function(){""!=$(this).val()?$(this).parent(".input-group").addClass("active"):$(this).parent(".input-group").removeClass("active")})})},check:function(e,a){e.parents("form").find(".error").removeClass("error"),e.parents("form").find(".txt-error").text("").hide(),e.parents(".box-input").find(".txt-error").text(a).show(),e.addClass("error").focus()},clear:function(e){$(e+" .error").removeClass("error"),$(e+" .txt-error").text("").hide()},signin:function(){var e="#frm-signin",a="#frm-reset-password",t=$(e+' [name="username"]'),n=$(a+" #RP_email"),o=$(e+' [name="password"]');$(".btn-sign-switch").click(function(e){$(".box-sign-switch").toggle(),$popupSignin.update(),e.preventDefault()}),$(".btn-reset-switch").click(function(e){$(".box-reset-switch").toggle(),$popupSignin.update(),e.preventDefault()}),0==n.val()&&$(a).find(".btn-reset-password").prop("disabled",!0).addClass("linear"),$(a).on("keyup",function(){0!=n.val()?$(this).find(".btn-reset-password").prop("disabled",!1).removeClass("linear"):$(this).find(".btn-reset-password").prop("disabled",!0).addClass("linear")}),$(e).on("submit",function(a){if($popupSignin.update(),0==t.val())return $app.form.check(t,msg.email),!1;if(!emailCheck.test(t.val()))return $app.form.check(t,msg.email_invalid),!1;if(0==o.val())return $app.form.check(o,msg.password),!1;$app.form.clear(e),$(e+" .box-input-group").removeClass("error"),$(e+".btn-signin").addClass("loading").attr("disabled","");var n=$(e).serialize();$.post("https://event.thaiticketmajor.com/inc/check_user_signin.php",n,function(a){$(".btn-signin").removeClass("loading").removeAttr("disabled");(a=$.parseJSON(a)).result?window.location=a.url:($(e+" .txt-error").text(msg.signin_fail).show(),$(e+" .box-input-group").addClass("error"))}),a.preventDefault()}),$(a).on("submit",function(e){if(0==n.val())return $app.form.check(n,msg.email),!1;if(!emailCheck.test(n.val()))return $app.form.check(n,msg.email_invalid),!1;if(""==grecaptcha.getResponse(RC_resetPassword)||void 0==grecaptcha.getResponse(RC_resetPassword))return $app.form.clear(a),$(a+" .box-recaptcha").addClass("error"),$(a+" .txt-error-recaptcha").show().text(msg.captcha),!1;$app.form.clear(a);var t=$(a).serialize();$(".btn-reset-password").addClass("loading").attr("disabled",""),$.post("https://event.thaiticketmajor.com/tickets/forgot-password-process.php",t,function(e){$(".btn-reset-password").removeClass("loading").removeAttr("disabled");(e=$.parseJSON(e)).result?void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("success","เปลี่ยนรหัสผ่านสำเร็จ","ท่านจะได้รับรหัสผ่านใหม่ทางอีเมล์ของท่าน","ปิด"):$app.dialog.open("success","SUCCESS","You will get a new password in your mailbox","CLOSE"):"not-found"===e.message?void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("error","ขออภัย","ไม่พบชื่อผู้ใช้นี้ในระบบ<br>กรุณาตรวจสอบชื่อผู้ใช้ให้ถูกต้อง","ลองใหม่"):$app.dialog.open("error","SORRY","The system is not found this email,<br>Please check that it is correct.","TRY AGAIN"):void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("error","ขออภัย","เกิดข้อผิดพลาดบางประการ<br>กรุณาลองใหม่อีกครั้ง","ลองใหม่"):$app.dialog.open("error","SORRY","Something went wrong, Please try again.","TRY AGAIN")}),e.preventDefault()})},signup:function(){function e(){$(a+" .box-signup-step-1,.box-social-signin").hide(),$(a+" .box-signup-step-2").show(),flagGetCountry||($app.fn.getCountry(),flagGetCountry=!0),$popupSignin.update()}var a="#frm-signup",t=$(a+" #username"),n=$(a+" #password"),o=$(a+" #confirm_password"),i=!1;$.dobPicker({daySelector:"#dob_date",monthSelector:"#dob_month",yearSelector:"#dob_year",dayDefault:msg.date,monthDefault:msg.month,yearDefault:msg.year,minimumAge:5,maximumAge:99});var s=document.querySelector("#phone"),r=window.intlTelInput(s,{preferredCountries:["th"],separateDialCode:!0,utilsScript:"/assets/js/vendor/intl-tel-input/utils.js"});s.addEventListener("countrychange",function(){var e=r.getSelectedCountryData();$("#telephoneArea").val(e.dialCode)}),0==t.val()&&0==n.val()&&0==o.val()&&$(a).find(".btn-signup-continue").prop("disabled",!0).addClass("linear"),$(a+" .box-signup-step-1").on("keyup",function(){0!=t.val()&&0!=n.val()&&0!=o.val()?$(this).find(".btn-signup-continue").prop("disabled",!1).removeClass("linear"):$(this).find(".btn-signup-continue").prop("disabled",!0).addClass("linear")}),$(a+" .btn-signup-continue").on("click",function(i){return 0==t.val()?($app.form.check(t,msg.email),!1):emailCheck.test(t.val())?0==n.val()?($app.form.check(n,msg.password),!1):n.val().toString().length<"8"?($app.form.check(n,msg.password_min),!1):0==o.val()?($app.form.check(o,msg.password_confirm),!1):o.val()!=n.val()?($app.form.check(o,msg.password_match),!1):($(".btn-signup-continue").addClass("loading").attr("disabled",""),$.post("https://event.thaiticketmajor.com/register/checkemail.php",{email:t.val()},function(n){$(".btn-signup-continue").removeClass("loading").removeAttr("disabled"),n?$app.form.check(t,msg.email_duplicate):($app.form.clear(a+" .box-signup-step-1"),$(a+" .btn-edit-email .txt").html(t.val()),e())}),void i.preventDefault()):($app.form.check(t,msg.email_invalid),!1)}),$(a).on("submit",function(e){if(0==$(a+' [name="firstname"]').val())return $app.form.check($(a+' [name="firstname"]'),msg.firstname),!1;if(0==$(a+' [name="lastname"]').val())return $app.form.check($(a+' [name="lastname"]'),msg.lastname),!1;if(""==$(a+' [name="gender"]').val())return $app.form.check($(a+' [name="gender"]'),msg.gender),!1;if(""==$(a+' [name="dob_date"]').val())return $app.form.check($(a+' [name="dob_date"]'),msg.birthday),!1;if(""==$(a+' [name="dob_month"]').val())return $app.form.check($(a+' [name="dob_month"]'),msg.birthday),!1;if(""==$(a+' [name="dob_year"]').val())return $app.form.check($(a+' [name="dob_year"]'),msg.birthday),!1;if("th"==$app.language&&$(a+" #idcard").is(":checked")&&0==$(a+' [name="idcard_number"]').val())return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard),!1;if("th"==$app.language&&$(a+" #idcard").is(":checked")&&"13"!=$(a+' [name="idcard_number"]').val().toString().length)return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard_limit),!1;if("th"==$app.language&&$(a+" #idcard").is(":checked")&&!$app.fn.checkIDCard($(a+' [name="idcard_number"]').val()))return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard_invalid),!1;if("th"==$app.language&&$(a+" #passport").is(":checked")&&0==$(a+' [name="passport_number"]').val())return $app.form.check($(a+' [name="passport_number"]'),msg.passport),!1;if(0==$(a+' [name="phone"]').val())return $app.form.check($(a+' [name="phone"]'),msg.telephone),!1;if(!phoneCheck.test($(a+' [name="phone"]').val()))return $app.form.check($(a+' [name="phone"]'),msg.telephone_invalid),!1;if($(a+' [name="phone"]').val().toString().length<"9")return $app.form.check($(a+' [name="phone"]'),msg.telephone_limit),!1;if("th"==$app.language&&0==$(a+' [name="address"]').val())return $app.form.check($(a+' [name="address"]'),msg.address),!1;if("th"==$app.language&&0==$(a+' [name="country"]').val())return $app.form.check($(a+' [name="country"]'),msg.country),!1;if("th"==$app.language&&$app.check.countryTH&&"000"==$(a+' [name="province"]').val())return $app.form.check($(a+' [name="province"]'),msg.province),!1;if("th"==$app.language&&$app.check.countryTH&&"000"==$(a+' [name="district"]').val())return $app.form.check($(a+' [name="district"]'),msg.district),!1;if("th"==$app.language&&0==$(a+' [name="zipcode"]').val())return $app.form.check($(a+' [name="zipcode"]'),msg.zipcode),!1;if(!$(a+' [name="terms-service"]').is(":checked"))return $app.form.check($(a+' [name="terms-service"]'),msg.terms),!1;if(""==grecaptcha.getResponse(RC_signup)||void 0==grecaptcha.getResponse(RC_signup))return $app.form.clear(a),$(a+" .box-recaptcha").addClass("error"),$(a+" .txt-error-recaptcha").show().text(msg.captcha),!1;$app.form.clear(a),$(a+' [name="telephone"]').val($(a+" #telephoneArea").val()+$(a+' [name="phone"]').val());var t=$(a).serialize();$(".btn-signin-confirm").addClass("loading").attr("disabled",""),$.post("https://event.thaiticketmajor.com/register/register.php",t,function(e){var t=$.parseJSON(e).result;$(".btn-signin-confirm").removeClass("loading").removeAttr("disabled"),t?($app.popup.signinInit("signin"),void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.signupSuccess("สมัครสมาชิกเสร็จสมบูรณ์","ท่านสามารถเข้าสู่ระบบได้โดยกดปุ่มด้านล่าง","เข้าสู่ระบบ"):$app.dialog.signupSuccess("SUCCESS","You can sign in now by the button below.","SIGN IN"),$(a)[0].reset()):void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("error","ขออภัย","เกิดข้อผิดพลาดบางประการ<br>กรุณาลองใหม่อีกครั้ง","ลองใหม่"):$app.dialog.open("error","SORRY","Something went wrong, Please try again.","TRY AGAIN")}),e.preventDefault()}),$(a+" #birthday").on("change",function(){""!=$(this).val()?$(this).addClass("valid"):$(this).removeClass("valid")}),$(a+" select").on("change",function(){$(this).each(function(){""!=$(this).val()?$(this).addClass("valid"):$(this).removeClass("valid")})}),$(a+' .radiobox input[type="radio"]').on("change",function(){$(this).each(function(){$(this).parents(".box-radiobox").find(".radiobox").removeClass("selected"),$(this).is(":checked")?$(this).parents(".radiobox").addClass("selected"):$(this).parents(".radiobox").removeClass("selected")})}),$(a+' [name="id_number_select"]').on("change",function(){"idcard"==$(this).val()?($(".input-passport").hide().blur(),$(".input-idcard").show().find("input").focus()):($(".input-idcard").hide().blur(),$(".input-passport").show().find("input").focus())}),$(a+" .btn-signin-continue").click(function(){e()}),$(a+" .btn-edit-email").click(function(){$(a+" .box-signup-step-1,.box-social-signin").show(),$(a+" .box-signup-step-2").hide(),$popupSignin.update(),$(a+' [name="username"]').focus()}),$(a+" .btn-add-address").click(function(){i=!0,$(this).hide(),$(a+" .box-address").show(),setTimeout(function(){$(a+' [name="address"]').focus()},50)})},editProfile:function(e){var a="#frm-edit-profile",t=$(a).attr("action");$.dobPicker({daySelector:"#dob_date",monthSelector:"#dob_month",yearSelector:"#dob_year",dayDefault:msg.date,monthDefault:msg.month,yearDefault:msg.year,minimumAge:5,maximumAge:99}),$("#dob_date").val(e.date),$("#dob_month").val(e.month),$("#dob_year").val(e.year);var n=document.querySelector("#phone"),o=window.intlTelInput(n,{preferredCountries:[e.country.toLowerCase()],separateDialCode:!0,utilsScript:"/assets/js/vendor/intl-tel-input/utils.js"});n.addEventListener("countrychange",function(){var e=o.getSelectedCountryData();$("#telephoneArea").val(e.dialCode)}),o.setCountry(e.country),$app.fn.getCountry(e.country),$(a).on("submit",function(e){if(0==$(a+' [name="firstname"]').val())return $app.form.check($(a+' [name="firstname"]'),msg.firstname),!1;if(0==$(a+' [name="lastname"]').val())return $app.form.check($(a+' [name="lastname"]'),msg.lastname),!1;if(""==$(a+' [name="gender"]').val())return $app.form.check($(a+' [name="gender"]'),msg.gender),!1;if(""==$(a+' [name="dob_date"]').val())return $app.form.check($(a+" #dob_date_select"),msg.birthday),!1;if(""==$(a+' [name="dob_month"]').val())return $app.form.check($(a+" #dob_month_select"),msg.birthday),!1;if(""==$(a+' [name="dob_year"]').val())return $app.form.check($(a+" #dob_year_select"),msg.birthday),!1;if($(a+" #idcard").is(":checked")&&0==$(a+' [name="idcard_number"]').val())return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard),!1;if($(a+" #idcard").is(":checked")&&"13"!=$(a+' [name="idcard_number"]').val().toString().length)return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard_limit),!1;if($(a+" #idcard").is(":checked")&&!$app.fn.checkIDCard($(a+' [name="idcard_number"]').val()))return $app.form.check($(a+' [name="idcard_number"]'),msg.idcard_invalid),!1;if($(a+" #passport").is(":checked")&&0==$(a+' [name="passport_number"]').val())return $app.form.check($(a+' [name="passport_number"]'),msg.passport),!1;if(0==$(a+' [name="phone"]').val())return $app.form.check($(a+' [name="phone"]'),msg.telephone),!1;if(!phoneCheck.test($(a+' [name="phone"]').val().replace(/ /g,"")))return $app.form.check($(a+' [name="phone"]'),msg.telephone_invalid),!1;if($(a+' [name="phone"]').val().toString().length<"9")return $app.form.check($(a+' [name="phone"]'),msg.telephone_limit),!1;if(0==$(a+' [name="address"]').val())return $app.form.check($(a+' [name="address"]'),msg.address),!1;if(0==$(a+' [name="country"]').val())return $app.form.check($(a+' [name="country"]'),msg.country),!1;if($app.check.countryTH&&"000"==$(a+' [name="province"]').val())return $app.form.check($(a+' [name="province"]'),msg.province),!1;if($app.check.countryTH&&"000"==$(a+' [name="district"]').val())return $app.form.check($(a+' [name="district"]'),msg.district),!1;if(0==$(a+' [name="zipcode"]').val())return $app.form.check($(a+' [name="zipcode"]'),msg.zipcode),!1;$app.form.clear(a),$(a+' [name="telephone"]').val($(a+" #telephoneArea").val()+$(a+' [name="phone"]').val().replace(/ /g,""));var n=$(a).serialize();$(".btn-update-profile").addClass("loading").attr("disabled",""),$.post(t,n,function(e){var a=$.parseJSON(e).result;$(".btn-update-profile").removeClass("loading").removeAttr("disabled"),a?void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("success","แก้ไขข้อมูลสำเร็จ","ข้อมูลของท่านได้รับการแก้ไขแล้ว","ปิด"):$app.dialog.open("success","COMPLETED","Your profile has been updated.","CLOSE"):void 0==$.cookie("__la")||""==$.cookie("__la")||"th"==$.cookie("__la")?$app.dialog.open("error","ขออภัย","เกิดข้อผิดพลาดบางประการ<br>กรุณาลองใหม่อีกครั้ง","ลองใหม่"):$app.dialog.open("error","SORRY","Something went wrong, Please try again.","TRY AGAIN")}),e.preventDefault()}),$(a+" #birthday").on("change",function(){""!=$(this).val()?$(this).addClass("valid"):$(this).removeClass("valid")}),$(a+" select").on("change",function(){$(this).each(function(){""!=$(this).val()?$(this).addClass("valid"):$(this).removeClass("valid")})}),$(a+' .radiobox input[type="radio"]').on("change",function(){$(this).each(function(){$(this).parents(".box-radiobox").find(".radiobox").removeClass("selected"),$(this).is(":checked")?$(this).parents(".radiobox").addClass("selected"):$(this).parents(".radiobox").removeClass("selected")})}),$(a+' [name="id_number_select"]').on("change",function(){"idcard"==$(this).val()?($(".input-passport").hide().blur(),$(".input-idcard").show().find("input").focus()):($(".input-idcard").hide().blur(),$(".input-passport").show().find("input").focus())})}};var $popupSignin;$app.popup={signin:function(e){$popupSignin=$.fancybox.open({src:"#popup-signin",opts:{afterShow:function(){void 0==e||""==e?$("#frm-signin #redir").val(window.location.href):$("#frm-signin #redir").val(e)}}})},signinInit:function(e){switch($("#frm-signup .box-signup-step-1").show(),$("#frm-signup .box-signup-step-2").hide(),e){case"signin":$("#frm-signin").show(),$("#frm-reset-password,#frm-signup").hide();break;case"signup":$("#frm-signup").show(),$("#frm-reset-password,#frm-signin").hide()}}},$app.fn={goto:function(e){$("html,body").animate({scrollTop:$(e).offset().top},800,function(){lazy.update()})},share:function(e){var a=encodeURIComponent($meta.title);switch(e){case"facebook":FB.ui({app_id:"326324767913792",method:"share",display:"popup",href:$meta.url},function(e){});break;case"twitter":$app.fn.window_open("https://twitter.com/intent/tweet?text="+a+"&url="+$meta.url+"&via=ThaiTicketMajor");break;case"line":$app.fn.window_open("https://lineit.line.me/share/ui?url="+$meta.url);break;case"google":$app.fn.window_open("https://plus.google.com/share?url="+$meta.url)}},window_open:function(e){var a=$(window).width()/2-250,t=$(window).height()/2-250;window.open(e,"","toolbar=yes,scrollbars=yes,resizable=yes,top="+t+",left="+a+",width=500,height=500")},setLang:function(e){$app.language=e,0!=$(".lang-switcher").length&&$('.lang-switcher [data-lang="'+e+'"]').addClass("active")},getCountry:function(country){var lang=$("#lang").val();if(""==country||void 0==country)var $country="TH";else var $country=country;$.post("https://event.thaiticketmajor.com/tickets/getcountry.ajax.php?lang="+lang,function(data){$("#country").append(data),$("#country").val("TH"),$.post("https://event.thaiticketmajor.com/tickets/getstate.ajax.php?lang="+lang+"&value="+$country,function(data,status){var re=eval("("+data+")");$("#province").html(re.pages).addClass("valid"),$("#province option[value='000']").html(msg.province)})})},getProvince:function(){window.focus(),$("#zipcode").val("");var value=$("#country").val(),lang=$("#lang").val();"TH"===value?($(".row-th-state").show(),$app.check.countryTH=!0):($(".row-th-state").hide(),$app.check.countryTH=!1);var ajaxUrl="https://event.thaiticketmajor.com/tickets/getstate.ajax.php?lang="+lang+"&value="+value;$.post(ajaxUrl,function(data,status){var re=eval("("+data+")");$("#province").html(re.pages).addClass("valid"),$("#province option[value='000']").html(msg.province),"000"===value&&$("#province").html('<option value="000">'+msg.province+"</option>").removeClass("valid")});var ajaxUrl_2="https://event.thaiticketmajor.com/tickets/getcity.ajax.php?mode=2&lang="+lang+"&value="+value;return $.post(ajaxUrl_2,function(data,status){var re=eval("("+data+")");$("#district").html(re.pages).addClass("valid"),$("#district option[value='000']").html(msg.amphoe),"000"===value&&$("#district").html('<option value="000">'+msg.amphoe+"</option>").removeClass("valid")}),!1},getCity:function(){window.focus();var value=$("#province").val(),lang=$("#lang").val(),ajaxUrl="https://event.thaiticketmajor.com/tickets/getcity.ajax.php?mode=1&lang="+lang+"&value="+value;return $.post(ajaxUrl,function(data,status){var re=eval("("+data+")");$("#district").html(re.pages).addClass("valid"),$("#district option[value='000']").html(msg.amphoe),"000"===value&&$("#district").html('<option value="000">'+msg.amphoe+"</option>").removeClass("valid")}),!1},checkIDCard:function(e){for(i=0,sum=0;i<12;i++)sum+=parseFloat(e.charAt(i))*(13-i);return(11-sum%11)%10==parseFloat(e.charAt(12))}},$app.slider={single:function(e){$(e).slick({arrows:!0,dots:!0,infinite:!0,speed:500,fade:!0,autoplay:!0,autoplaySpeed:5e3,lazyLoad:"ondemand",slidesToShow:1,responsive:[{breakpoint:767,settings:{arrows:!1}}]})}},$app.dialog={open:function(e,a,t,n){$.fancybox.open({type:"ajax",src:"/ajax/popup-dialog-"+e+".php",closeBtn:!1,padding:0,margin:[40,20,40,20],opts:{afterLoad:function(){$("#popup-dialog-"+e+" .head-dialog").html(a),""!=n&&$("#popup-dialog-"+e+" .btn-main-action").html(n),""!=t?($("#popup-dialog-"+e+" .row-body").show(),$("#popup-dialog-"+e+" .msg-dialog").html(t)):$("#popup-dialog-"+e+" .row-body").hide()}}})},signupSuccess:function(e,a,t){$.fancybox.open({type:"ajax",src:"/ajax/popup-dialog-success.php",closeBtn:!1,padding:0,margin:[40,20,40,20],opts:{afterLoad:function(){$("#popup-dialog-success .head-dialog").html(e),""!=t&&$("#popup-dialog-success .btn-main-action").addClass("red-ttm").html(t).attr("onclick","$app.popup.signin();"),""!=a?($("#popup-dialog-success .row-body").show(),$("#popup-dialog-success .msg-dialog").html(a)):$("#popup-dialog-success .row-body").hide()}}})},custom:function(e,a,t,n){$.fancybox.open({type:"ajax",src:"/ajax/popup-dialog-custom.php",closeBtn:!1,padding:0,margin:[40,20,40,20],opts:{afterLoad:function(){$("#popup-dialog").addClass("popup-dialog-"+e),$("#popup-dialog .head-dialog").html(a),""!=n&&$("#popup-dialog .item-btn").append(n),""!=t?($("#popup-dialog .row-body").show(),$("#popup-dialog .msg-dialog").html(t)):$("#popup-dialog .row-body").hide()}}})}};